(this["webpackJsonpspotify-cs"]=this["webpackJsonpspotify-cs"]||[]).push([[0],{48:function(e,t,a){"use strict";(function(e){var n=a(15),i=a(0),s=(a(68),a(28)),o=a(23),c=a(49),r=a.n(c),d=a(50),l=a(51),u=(a(69),a(7)),m=a.n(u),f=a(94),h=a(95),p=a(54),j=a(55),b=a(22),_=a(39),O=a(56),g=a(52),y=a.n(g),v=a(34),x=a.n(v),w=a(6);y.a.config({path:".env"});var C,S,k,N="69f0df16f2e44356b30c718346f5582f",T="http://0.0.0.0:5000/";t.a=function(){var t=Object(i.useState)(""),a=Object(n.a)(t,2),c=a[0],u=a[1],g=Object(i.useState)(""),y=Object(n.a)(g,2),v=y[0],I=y[1],B=Object(i.useState)(!1),E=Object(n.a)(B,2),P=E[0],D=E[1],z=Object(i.useState)(!1),J=Object(n.a)(z,2),A=J[0],L=J[1],U=Object(i.useState)(!1),F=Object(n.a)(U,2),M=F[0],q=F[1],G=Object(i.useState)(!1),R=Object(n.a)(G,2),$=R[0],V=R[1],H=Object(i.useState)(!1),W=Object(n.a)(H,2),K=W[0],Q=W[1],X=Object(i.useState)(!1),Y=Object(n.a)(X,2),Z=Y[0],ee=Y[1],te=Object(i.useRef)(null);m()((function(){x()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+e.from(N+":6d0107509c9c4d4a9efb8589bb82a7f3").toString("base64")},data:"grant_type=client_credentials",method:"POST"}).then((function(e){C=e.data.access_token})),window.$("#autocomplete").autocomplete({source:function(e,t){var a=e.term.toLowerCase().split(" ").join("+");x()("https://api.spotify.com/v1/search?q=".concat(a,"&type=track&market=US"),{method:"GET",headers:{Authorization:"Bearer "+C}}).then((function(e){t(m.a.map(e.data.tracks.items.slice(0,5),(function(e){return{label:e.name+" by "+e.artists[0].name,value:e.name+" "+e.artists[0].name,id:e.id}})))})).catch((function(e){console.log(e.response)}))},minLength:1,select:function(e,t){window.$("#autocomplete").val(t.item.value),window.location.href="#"+t.item.value,u(t.item.value),I(t.item.id)}})}));function ae(){window.$("#js-rotating").Morphext({animation:"animate__animated animate__fadeInUp",separator:",",speed:2500,complete:function(){}}),m()(".title").addClass("animate__animated animate__fadeOut"),m()(".form-rounded").addClass("animate__animated animate__fadeOutUp"),m()(".submitBtn").addClass("animate__animated animate__fadeOutDown"),setTimeout((function(){L(!0)}),2e3),m()(".music").addClass("animate__animated animate__fadeIn"),m()(".spinner").addClass("animate__animated animate__fadeIn")}function ne(){m()(".signOutBtn").addClass("animate__animated animate__fadeInDown").attr("hidden",!1)}function ie(){window.location.reload()}function se(e){fetch("/api/playlist",{method:"POST",mode:"cors",headers:{"Content-Type":"Application/JSON"},body:JSON.stringify({search_str:e})}).then((function(e){return e.ok||(V(!0),setTimeout((function(){ie()}),4e3)),e.text()})).then((function(e){""===c&&(k.activate(),k.callProjectApi("setClientData1",{value:e},(function(e,t){e&&console.error(e)})));var t=JSON.parse(e);!function(e){m()(".music").removeClass("animate__animated animate__fadeIn"),m()(".spinner").removeClass("animate__animated animate__fadeIn"),m()(".music").addClass("animate__animated animate__fadeOut"),m()(".spinner").addClass("animate__animated animate__fadeOut"),m()(".spotifyButton").addClass("animate__animated animate__fadeInDown").attr("hidden",!1);var t=m()("ul.songList").addClass("animate__animated animate__fadeIn").attr("hidden",!1);e.forEach((function(e){var a=m()('<ListGroupItem as="li" bsClass="customList"/>').addClass("animate__animated animate__fadeInUp").appendTo(t);m()("<a href= ".concat(e.externalURL,' target="_blank" rel="noopener noreferrer"\' +\'/>')).addClass("list-group-item").text(e.title+" by "+e.artist).appendTo(a)})),L(!1),m()(".animate__animated animate__fadeInDown").remove(),m()(".searchbar").remove(),m()(".submitBtn").remove(),m()(".title").removeClass("animate__animated animate__fadeOut"),m()(".title").css("margin-top","80px"),m()(".title").addClass("animate__animated animate__fadeInDown")}(t),S=t}))}function oe(e,t,a){fetch("/api/postPlaylist",{method:"POST",mode:"cors",headers:{"Content-Type":"Application/JSON"},body:JSON.stringify([e,t,a,S])}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.text()})).then((function(e){"True"===e&&(setTimeout((function(){ne()}),1e3),q(!0),k.playText("Done."))})).catch((function(e){console.log(e)}))}function ce(e){if(!1===Z){var t=window.open("https://accounts.spotify.com/authorize?client_id=".concat(N,"&response_type=code&redirect_uri=").concat(T,"&scope=").concat("playlist-modify-public"),"Login with Spotify","width=800,height=600");window.spotifyCallback=function(a){t.close(),oe(e,a,T)}}else oe(e,"",T)}return Object(i.useEffect)((function(){var e=void 0;window.location.href.includes("code")&&(e=window.location.href.substr(26)),e&&window.opener.spotifyCallback(e),fetch("/api/isSignedIn",{method:"POST",mode:"cors",headers:{"Content-Type":"Application/JSON"},body:JSON.stringify({})}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.text()})).then((function(e){"true"===e&&(ne(),ee(!0))})).catch((function(e){console.log(e)})),k=r()({key:"08dd587b9900d0225d9ec940df3f5af82e956eca572e1d8b807a3e2338fdd0dc/stage",onCommand:function(e){var t=e.command,a=e.song_info,n=e.search_str,i=e.ans;"listSearch"===t?function(e){window.open(e.external_urls.spotify)}(a):"makePlaylist"===t?(ae(),se(n)):"postPlaylist"===t&&ce(i)},rootEl:document.getElementById("alan-btn")})}),[]),Object(w.jsxs)("div",{style:{height:"100%",backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.4)), url(".concat(d.a,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[Object(w.jsxs)("div",{className:"main-div",children:[Object(w.jsx)(o.a,{className:"signOutBtn",size:"sm",variant:"success",type:"submit",hidden:!0,onClick:function(){fetch("/api/signOut",{method:"POST",mode:"cors",headers:{"Content-Type":"Application/JSON"},body:JSON.stringify({})}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.text()})).catch((function(e){console.log(e)})),ie(),ee(!1)},children:"Sign Out"}),"",Object(w.jsx)("div",{className:"animate__animated animate__fadeIn",children:Object(w.jsx)("h1",{className:"title",id:"titleLink",children:"Seamless"})}),Object(w.jsx)("div",{className:"animate__animated animate__fadeInDown",children:Object(w.jsx)("div",{ref:te,children:Object(w.jsx)(s.a,{id:"searchForm",ref:te,noValidate:!0,validated:P,onSubmit:function(e){if(!1===e.target.checkValidity());else{var t=c.toLowerCase().split(" ").join("+");x()("https://api.spotify.com/v1/search?q=".concat(t,"&type=track&market=US"),{method:"GET",headers:{Authorization:"Bearer "+C}}).then((function(t){t.data.tracks.items.length>=1?(e.preventDefault(),ae(),se(v),L(!1)):(e.preventDefault(),Q(!0),D(!1))})).catch((function(e){console.log(e.response)}))}e.preventDefault(),D(!0)},children:Object(w.jsxs)(s.a.Group,{className:"searchbar",children:[Object(w.jsx)(s.a.Control,{className:"form-rounded",id:"autocomplete",value:c,size:"lg",type:"text",placeholder:"Enter an artist and song :)",onChange:function(e){u(e.target.value),Q(!1)},required:!0}),Object(w.jsx)(s.a.Control.Feedback,{type:"invalid",children:"Please enter a song and artist."})]})})})}),Object(w.jsxs)("div",{className:"animate__animated animate__fadeInUp",children:[Object(w.jsx)(o.a,{form:"searchForm",className:"submitBtn",size:"lg",variant:"success",type:"submit",children:"Submit"}),"",Object(w.jsx)(O.a,{show:K,target:te.current,placement:"right",children:Object(w.jsx)(_.a,{id:"popover-basic",children:Object(w.jsxs)(_.a.Content,{children:[Object(w.jsx)("strong",{children:"Uh oh"})," we couldn't find your song. Please try a different song!"]})})})]}),Object(w.jsx)("div",{className:"addToSpotify",children:Object(w.jsx)(f.a,{children:Object(w.jsxs)(p.a,{className:"justify-content-center",md:"auto",children:[Object(w.jsx)(o.a,{className:"spotifyButton",hidden:!0,size:"lg",variant:"success",type:"button",disabled:M,onClick:function(){ce("True")},children:M?"Done!":"Add to Spotify"}),"",Object(w.jsx)(o.a,{className:"spotifyButton",hidden:!0,size:"lg",variant:"success",type:"button",onClick:ie,children:"Create Another"}),""]})})}),Object(w.jsx)("div",{className:"errorModal",children:Object(w.jsxs)(b.a,{size:"lg",show:$,children:[Object(w.jsx)(b.a.Header,{closeButton:!0,children:Object(w.jsx)(b.a.Title,{children:"Error"})}),Object(w.jsx)(b.a.Body,{children:"Oops! Something went wrong. Refreshing the page in a few seconds..."}),Object(w.jsx)(b.a.Footer,{children:Object(w.jsx)(o.a,{variant:"secondary",onClick:function(){V(!1)},children:"Close"})})]})}),Object(w.jsx)("div",{children:Object(w.jsx)(j.a,{className:"music",src:l.a,roundedCircle:!0,hidden:!A})}),Object(w.jsx)("span",{hidden:!A,id:"js-rotating",children:"Studying similar artists..., This looks interesting..., Finding great songs..., Putting you on to new sounds..., Thanks for using Seamless :), Elvis?? That's not right..., Back on track!...sorta?, Bringing you quality music..., Making a playlist..., Wrapping up...,"}),Object(w.jsx)("div",{className:"animate-flicker",hidden:!A}),Object(w.jsx)("div",{children:Object(w.jsx)(h.a,{as:"ul",className:"songList",hidden:!0})})]}),Object(w.jsx)("footer",{className:"footer",children:Object(w.jsx)("div",{className:"tech",children:Object(w.jsx)("p",{})})})]})}}).call(this,a(63).Buffer)},50:function(e,t,a){"use strict";t.a=a.p+"static/media/download.11a8d496.png"},51:function(e,t,a){"use strict";t.a=a.p+"static/media/jakeMusic.8085185a.gif"},57:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(11),o=a.n(s),c=(a(62),a(48)),r=a(6);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(c.a,{})}),document.getElementById("root"))},62:function(e,t,a){},69:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.aa030afd.chunk.js.map