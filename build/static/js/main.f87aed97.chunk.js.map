{"version":3,"sources":["App.js","images/download.png","images/jakeMusic.gif","index.js"],"names":["dotenv","config","path","access_token","alan","client_id","process","redirect_uri","App","useState","inputText","setInputText","song","setSong","validated","setValidated","loading","setLoading","posted","setPosted","alert","showAlert","found","setFound","signIn","setSignIn","ref","useRef","$","axios","headers","Authorization","Buffer","from","toString","data","method","then","tokenResponse","window","autocomplete","source","request","response","query","term","toLowerCase","split","join","trackResponse","map","tracks","items","slice","item","label","name","artists","value","id","catch","error","console","log","minLength","select","event","ui","val","location","href","loadingAnimation","Morphext","animation","separator","speed","complete","addClass","setTimeout","loadSignOut","attr","refreshPage","reload","makePlaylist","search_str","fetch","mode","body","JSON","stringify","ok","text","activate","callProjectApi","result","songArray","removeClass","songList","forEach","element","li","appendTo","remove","css","loadResults","parse","sendtoSpotify","ans","payload","Error","statusText","playText","postPlaylist","popup","open","spotifyCallback","close","useEffect","code","undefined","includes","substr","opener","alanBtn","key","onCommand","command","song_info","external_urls","spotify","playSong","rootEl","document","getElementById","style","height","backgroundImage","background","backgroundSize","backgroundPosition","backgroundRepeat","className","size","variant","type","hidden","onClick","noValidate","onSubmit","e","target","checkValidity","length","preventDefault","Group","Control","placeholder","onChange","required","Feedback","form","show","current","placement","Content","md","disabled","Header","closeButton","Title","Body","Footer","src","musicGif","roundedCircle","as","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.f87aed97.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef} from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport alanBtn from \"@alan-ai/alan-sdk-web\";\nimport background from \"./images/download.png\";\nimport musicGif from \"./images/jakeMusic.gif\";\nimport \"./App.css\";\nimport $ from \"jquery\";\nimport { Container, ListGroup } from \"react-bootstrap\";\nimport Row from \"react-bootstrap/Row\";\nimport Image from \"react-bootstrap/Image\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Popover from \"react-bootstrap/Popover\";\nimport Overlay from \"react-bootstrap/Overlay\";\nimport dotenv from \"dotenv\";\nimport axios from \"axios\";\n\ndotenv.config({ path: \".env\" });\n\nconst client_id = process.env.REACT_APP_client_id;\nconst client_secret = process.env.REACT_APP_client_secret;\nconst redirect_uri = process.env.REACT_APP_redirect_uri;\nlet access_token;\n\nconst alanKey = process.env.REACT_APP_alanKey;\nvar alan;\n\nconst App = () => {\n  const [inputText, setInputText] = useState(\"\");\n  const [song, setSong] = useState(\"\");\n  const [validated, setValidated] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [posted, setPosted] = useState(false);\n  const [alert, showAlert] = useState(false);\n  const [found, setFound] = useState(false);\n  const [signIn, setSignIn] = useState(false);\n  const ref = useRef(null);\n\n  $(function () {\n\n    axios(\"https://accounts.spotify.com/api/token\", {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Authorization:\n          \"Basic \" +\n          Buffer.from(client_id + \":\" + client_secret).toString(\"base64\"),\n      },\n      data: \"grant_type=client_credentials\",\n      method: \"POST\",\n    }).then((tokenResponse) => {\n      access_token = tokenResponse.data.access_token;\n    });\n\n    window.$(\"#autocomplete\").autocomplete({\n      source: function (request, response) {\n        let query = request.term.toLowerCase().split(\" \").join(\"+\");\n\n        axios(\n          `https://api.spotify.com/v1/search?q=${query}&type=track&market=US`,\n          {\n            method: \"GET\",\n            headers: { Authorization: \"Bearer \" + access_token },\n          }\n        )\n          .then((trackResponse) => {\n            //const song_info = trackResponse.data.tracks.items[0]\n            response(\n              $.map(\n                trackResponse.data.tracks.items.slice(0, 5),\n                function (item) {\n                  return {\n                    label: item.name + \" by \" + item.artists[0].name,\n                    value: item.name + \" \" + item.artists[0].name, //change to id\n                    id: item.id,\n                  };\n                }\n              )\n            );\n          })\n          .catch((error) => {\n            console.log(error.response);\n          });\n      },\n      minLength: 1,\n      select: function (event, ui) {\n        window.$(\"#autocomplete\").val(ui.item.value);\n        window.location.href = \"#\" + ui.item.value;\n        setInputText(ui.item.value);\n        setSong(ui.item.id);\n      },\n    });\n  });\n\n  //Sets input Text\n  const inputTextHandler = (e) => {\n    setInputText(e.target.value);\n    setFound(false);\n  };\n\n  //Final Typed Query from user\n  const submitHandler = (e) => {\n    if (e.target.checkValidity() === false) {\n    } else {\n\n      let query = inputText.toLowerCase().split(\" \").join(\"+\");\n\n      axios(\n        `https://api.spotify.com/v1/search?q=${query}&type=track&market=US`,\n        {\n          method: \"GET\",\n          headers: { Authorization: \"Bearer \" + access_token },\n        }\n      )\n        .then((trackResponse) => {\n          if (trackResponse.data.tracks.items.length >= 1) {\n            e.preventDefault();\n            loadingAnimation();\n            makePlaylist(song);\n            setLoading(false);\n          } else {\n            e.preventDefault();\n            setFound(true);\n            setValidated(false);\n          }\n        })\n        .catch((error) => {\n          console.log(error.response);\n        });\n    }\n    e.preventDefault();\n    setValidated(true);\n  };\n\n  function loadingAnimation() {\n    window.$(\"#js-rotating\").Morphext({\n      animation: \"animate__animated animate__fadeInUp\",\n      separator: \",\",\n      speed: 2500,\n      complete: function () {},\n    });\n    $(\".title\").addClass(\"animate__animated animate__fadeOut\");\n    $(\".form-rounded\").addClass(\"animate__animated animate__fadeOutUp\");\n    $(\".submitBtn\").addClass(\"animate__animated animate__fadeOutDown\");\n    setTimeout(function () {\n      setLoading(true);\n    }, 2000);\n    $(\".music\").addClass(\"animate__animated animate__fadeIn\");\n    $(\".spinner\").addClass(\"animate__animated animate__fadeIn\");\n  }\n\n  function loadResults(songArray) {\n    $(\".music\").removeClass(\"animate__animated animate__fadeIn\");\n    $(\".spinner\").removeClass(\"animate__animated animate__fadeIn\");\n    $(\".music\").addClass(\"animate__animated animate__fadeOut\");\n    $(\".spinner\").addClass(\"animate__animated animate__fadeOut\");\n\n    $(\".spotifyButton\")\n      .addClass(\"animate__animated animate__fadeInDown\")\n      .attr(\"hidden\", false);\n\n    var songList = $(\"ul.songList\")\n      .addClass(\"animate__animated animate__fadeIn\")\n      .attr(\"hidden\", false);\n    songArray.forEach((element) => {\n      var li = $('<ListGroupItem as=\"li\" bsClass=\"customList\"/>')\n        .addClass(\"animate__animated animate__fadeInUp\")\n        .appendTo(songList);\n      $(\n        `<a href= ${element[\"externalURL\"]} target=\"_blank\" rel=\"noopener noreferrer\"' +'/>`\n      )\n        .addClass(\"list-group-item\")\n        .text(element[\"title\"] + \" by \" + element[\"artist\"])\n        .appendTo(li);\n    });\n    setLoading(false);\n    $(\".animate__animated animate__fadeInDown\").remove();\n    $(\".searchbar\").remove();\n    $(\".submitBtn\").remove();\n    $(\".title\").removeClass(\"animate__animated animate__fadeOut\");\n    $(\".title\").css(\"margin-top\", \"80px\");\n    $(\".title\").addClass(\"animate__animated animate__fadeInDown\");\n  }\n\n  function loadSignOut() {\n\n    $(\".signOutBtn\")\n    .addClass(\"animate__animated animate__fadeInDown\")\n    .attr(\"hidden\", false);\n\n  }\n\n  function isSignedIn(){\n    fetch(\"/api/isSignedIn\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"Application/JSON\",\n      },\n      body: JSON.stringify({}),\n    })\n      .then(function (response) {\n        if (!response.ok) {\n          throw Error(response.statusText);\n        }\n        return response.text();\n      })\n      .then(function (response) {\n        if (response === 'true'){\n          loadSignOut();\n          setSignIn(true);\n\n        }\n\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  }\n\n  function refreshPage() {\n    window.location.reload();\n  }\n\n  useEffect(() => {\n    let code = undefined;\n    if (window.location.href.includes(\"code\")) {\n      code = window.location.href.substr(40);\n    }\n    if (code) {\n      window.opener.spotifyCallback(code)\n    }\n    isSignedIn();\n    alan = alanBtn({\n      key: alanKey,\n      onCommand: ({ command, song_info, search_str, ans }) => {\n        if (command === \"listSearch\") {\n          playSong(song_info);\n        } else if (command === \"makePlaylist\") {\n          loadingAnimation();\n          makePlaylist(search_str);\n        } else if (command === \"postPlaylist\") {\n          postPlaylist(ans);\n        }\n      },\n      rootEl: document.getElementById(\"alan-btn\"),\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function playSong(song_info) {\n    window.open(song_info.external_urls.spotify);\n  }\n\n  function makePlaylist(search_str) {\n    fetch(\"/api/playlist\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"Application/JSON\",\n      },\n      body: JSON.stringify({ search_str }),\n    })\n      .then(function (response) {\n        if (!response.ok) {\n          //throw Error(response.statusText);\n          showAlert(true);\n          setTimeout(function () {\n            refreshPage();\n          }, 4000);\n        }\n        return response.text();\n      })\n      .then(function (response) {\n        if (inputText === \"\") {\n          alan.activate();\n          alan.callProjectApi(\n            \"setClientData1\",\n            { value: response },\n            function (error, result) {\n              if (error) {\n                console.error(error);\n                return;\n              }\n            }\n          );\n        }\n        var songArray = JSON.parse(response);\n        loadResults(songArray);\n      });\n  }\n\n  function sendtoSpotify(ans, payload, redirect_uri) {\n    fetch(\"/api/postPlaylist\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"Application/JSON\",\n      },\n      body: JSON.stringify([ans, payload, redirect_uri]),\n    })\n      .then(function (response) {\n        if (!response.ok) {\n          throw Error(response.statusText);\n        }\n        return response.text();\n      })\n      .then(function (response) {    \n        if (response === \"True\"){\n          setTimeout(function () {\n            loadSignOut();\n          }, 1000);\n          setPosted(true);\n          alan.playText(\"Done.\");\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n  }\n\n  function postPlaylist(ans) {\n    let placeHolder = \"\";\n    if (signIn === false) {\n      const scope = 'playlist-modify-public';\n      let popup = window.open(`https://accounts.spotify.com/authorize?client_id=${client_id}&response_type=code&redirect_uri=${redirect_uri}&scope=${scope}`, 'Login with Spotify', 'width=800,height=600',);\n      window.spotifyCallback = (payload) => {\n        popup.close()\n        sendtoSpotify(ans, payload, redirect_uri)\n      }\n    }\n    else {\n      sendtoSpotify(ans, placeHolder, redirect_uri)\n    }\n  }\n\n  function signOut () {\n    fetch(\"/api/signOut\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"Application/JSON\",\n      },\n      body: JSON.stringify({}),\n    })\n      .then(function (response) {\n        if (!response.ok) {\n          throw Error(response.statusText);\n        }\n        return response.text();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n\n      refreshPage();\n  }\n\n  return (\n    <div\n      style={{\n        height: \"100%\",\n        backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.4)), url(${background})`,\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\",\n        backgroundRepeat: \"no-repeat\",\n      }}\n    >\n      <div className=\"main-div\">\n      <Button\n            className=\"signOutBtn\"\n            size=\"sm\"\n            variant=\"success\"\n            type=\"submit\"\n            hidden={true}\n            onClick={() => {\n              signOut();\n            }}\n          >\n            Sign Out\n          </Button>{\"\"}\n        <div className=\"animate__animated animate__fadeIn\">\n          <h1 className=\"title\" id=\"titleLink\">\n            Seamless\n          </h1>\n        </div>\n        <div className=\"animate__animated animate__fadeInDown\">\n          <div ref={ref}>\n            <Form\n              id=\"searchForm\"\n              ref={ref}\n              noValidate\n              validated={validated}\n              onSubmit={submitHandler}\n            >\n              <Form.Group className=\"searchbar\">\n                <Form.Control\n                  className=\"form-rounded\"\n                  id=\"autocomplete\"\n                  value={inputText}\n                  size=\"lg\"\n                  type=\"text\"\n                  placeholder=\"Enter an artist and song :)\"\n                  onChange={inputTextHandler}\n                  required={true}\n                />\n                <Form.Control.Feedback type=\"invalid\">\n                  Please enter a song and artist.\n                </Form.Control.Feedback>\n              </Form.Group>\n            </Form>\n          </div>\n        </div>\n        <div className=\"animate__animated animate__fadeInUp\">\n          <Button\n            form=\"searchForm\"\n            className=\"submitBtn\"\n            size=\"lg\"\n            variant=\"success\"\n            type=\"submit\"\n          >\n            Submit\n          </Button>\n          {\"\"}\n          <Overlay show={found} target={ref.current} placement=\"right\">\n            <Popover id=\"popover-basic\">\n              <Popover.Content>\n                <strong>Uh oh</strong> we couldn't find your song. Please try a\n                different song!\n              </Popover.Content>\n            </Popover>\n          </Overlay>\n        </div>\n        <div className=\"addToSpotify\">\n          <Container>\n            <Row className=\"justify-content-center\" md=\"auto\">\n              <Button\n                className=\"spotifyButton\"\n                hidden={true}\n                size=\"lg\"\n                variant=\"success\"\n                type=\"button\"\n                disabled={posted}\n                onClick={() => {\n                  postPlaylist(\"True\");\n                }}\n              >\n                {posted ? \"Done!\" : \"Add to Spotify\"}\n              </Button>\n              {\"\"}\n              <Button\n                className=\"spotifyButton\"\n                hidden={true}\n                size=\"lg\"\n                variant=\"success\"\n                type=\"button\"\n                onClick={refreshPage}\n              >\n                Create Another\n              </Button>\n              {\"\"}\n            </Row>\n          </Container>\n        </div>\n        <div className=\"errorModal\">\n          <Modal size=\"lg\" show={alert}>\n            <Modal.Header closeButton>\n              <Modal.Title>Error</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n              Oops! Something went wrong. Refreshing the page in a few\n              seconds...\n            </Modal.Body>\n            <Modal.Footer>\n              <Button\n                variant=\"secondary\"\n                onClick={() => {\n                  showAlert(false);\n                }}\n              >\n                Close\n              </Button>\n            </Modal.Footer>\n          </Modal>\n        </div>\n        <div>\n          <Image\n            className=\"music\"\n            src={musicGif}\n            roundedCircle={true}\n            hidden={!loading}\n          ></Image>\n        </div>\n        <span hidden={!loading} id=\"js-rotating\">\n          Studying similar artists..., You have an awesome taste in music!,\n          Finding great songs..., Putting you on to new sounds..., Thanks for\n          using Seamless :), Elvis?? That's not right..., Back on\n          track!...sorta?, Bringing you quality music..., Making a playlist...,\n          Wrapping up..., \n        </span>\n        <div className=\"animate-flicker\" hidden={!loading}></div>\n        <div>\n          <ListGroup as=\"ul\" className=\"songList\" hidden={true}></ListGroup>\n        </div>\n      </div>\n      <footer className=\"footer\">\n        <div className=\"tech\">\n          <p></p>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default App;\n","export default __webpack_public_path__ + \"static/media/download.11a8d496.png\";","export default __webpack_public_path__ + \"static/media/jakeMusic.8085185a.gif\";","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}